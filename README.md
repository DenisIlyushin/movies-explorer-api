# movies-explorer-api
Backend для дипломной работы по курсу "WEB-разработчик" Я.Практикума

[ссылка на репозиторий](https://github.com/DenisIlyushin/movies-explorer-api)

|            | ссылка                                                                                           |
|------------|--------------------------------------------------------------------------------------------------|
| IP сервера | 51.250.96.156                                                                                    |
| http API   | [http://denisilyushin.nomoredomainsicu.ru/api/](http://denisilyushin.nomoredomainsicu.ru/api/)   |
| https API  | [https://denisilyushin.nomoredomainsicu.ru/api/](https://denisilyushin.nomoredomainsicu.ru/api/) |

### Технологии

- NodeJS
- Express
- mongoDB
- Mongoose
- Helmet
- RateLimiter

---
## О проекте

Данная работа представляет собой бекенд сервиса, в котором можно найти фильмы 
по запросу и сохранить в личном кабинете. 

## Как он должен работать?
Пользователь вводит в строку поиска ключевые слова и нажимает кнопку «Искать». После этого сайт должен выполнить два действия:
- отправить запрос к нашему сервису с данными о фильмах, получить данные и сохранить;
- согласно введённому в поисковую строку тексту запроса найти все подходящие фильмы и отобразить карточки с ними;
- когда пользователь сохраняет фильм, он должен отображаться в специальном разделе сайта.

### Директории

`/routes` — папка с файлами роутера

`/controllers` — папка с файлами контроллеров пользователя и карточки

`/models` — папка с файлами описания схем пользователя и карточки

`/middleware` — папка c middleware обработчиками

`/errors` — папка с ошибками и функциями их обработки

`/utils` — папка с универсальными функциями

## URI
| Роут                   | Запрос        | Действие                                                                                                                           | Ошибки                                                                                                                                                                                                                |
|------------------------|---------------|------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `/signup`              | `POST`        | `POST`-запрос создаёт пользователя с переданными в теле запроса `name`, `email`, `password`                                        | `400` — Переданы некорректные данные при создании пользователя. `409` — Пользователь уже существует. `500` — Ошибка по умолчанию.                                                                                     |
| `/signin`              | `POST`        | `POST`-запрос создаёт JWT-токен для пользователя по переданным в теле запроса `email`, `password`                                  | `400` — Переданы некорректные данные при создании пользователя. `500` — Ошибка по умолчанию.                                                                                                                          |
| `/users/me`            | `GET` `PATCH` | `GET`-запрос возвращает информацию о текущем пользователе. `PATCH`-запрос обновляет информацию о текущем пользователе.             | `400` — Переданы некорректные данные при обновлении профиля. `401` — Ошибка авторизации. `403` — Попытка редактирования чужого профиля. `404` — Пользователь с указанным `_id` не найден. `500` — Ошибка по умолчанию. |
| `/movies`              | `GET` `POST`  | `GET`-запрос возвращает все карточки фильмов из базы данных. `POST`-запрос создает новую карточку фильма по переданным параметрам. | `400` — Переданы некорректные данные при создании карточки. `401` — Ошибка авторизации. `500` — Ошибка по умолчанию.                                                                                                  |
| `/movies/:cardId`      | `DELETE`      | `DELETE`-запрос удаляет карточку фильма по `_id`.                                                                                  | `401` — Ошибка авторизации. `404` — Карточка с указанным `_id` не найдена.                                                                                                                                            |

## Запуск проекта

После клонирования репозитория требуется установить зависимости:

```bash
npm install
```

`npm run start` — запускает сервер,
`npm run dev` — запускает сервер с hot-reload (dev-mode)

### Шаблон наполнения .env
Файл `.env` следует разместить в директории `./backend`.
Пример наполнения с комментариями приведет в файле `./.env.example`

ВНИМАНИЕ! При форматировании файла убрать все, что написано после `#`

---
### Автор проекта

Ден Илюшин ([DenisIlyushin](https://github.com/DenisIlyushin/))
